<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="next" href="Distributed.Message_type.html">
<link rel="Up" href="Distributed.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Distributed" rel="Chapter" href="Distributed.html">
<link title="Distributed_lwt" rel="Chapter" href="Distributed_lwt.html"><title>Distributed.Nonblock_io</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="Distributed.html" title="Distributed">Up</a>
&nbsp;<a class="post" href="Distributed.Message_type.html" title="Distributed.Message_type">Next</a>
</div>
<h1>Module type <a href="type_Distributed.Nonblock_io.html">Distributed.Nonblock_io</a></h1>

<pre><span class="keyword">module type</span> Nonblock_io = <code class="code"><span class="keyword">sig</span></code> <a href="Distributed.Nonblock_io.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info modtype top">
Abstract type which can perform monadic concurrent IO.<br>
</div>
<hr width="100%">

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type">'a</code> t</span> </pre>
<div class="info ">
The monadic light weight thread type returning value <code class="code"><span class="keywordsign">'</span>a</code>.<br>
</div>


<pre><span id="TYPEstream"><span class="keyword">type</span> <code class="type">'a</code> stream</span> </pre>
<div class="info ">
An unbounded stream holding values of <code class="code"><span class="keywordsign">'</span>a</code>.<br>
</div>


<pre><span id="TYPEinput_channel"><span class="keyword">type</span> <code class="type"></code>input_channel</span> </pre>
<div class="info ">
A type to represent a non-blocking input channel<br>
</div>


<pre><span id="TYPEoutput_channel"><span class="keyword">type</span> <code class="type"></code>output_channel</span> </pre>
<div class="info ">
A type to represent a non-blocking output channel<br>
</div>


<pre><span id="TYPEserver"><span class="keyword">type</span> <code class="type"></code>server</span> </pre>
<div class="info ">
A type to represent a server<br>
</div>


<pre><span id="EXCEPTIONTimeout"><span class="keyword">exception</span> Timeout</span></pre>
<div class="info ">
Exception raised by <a href="Distributed.Nonblock_io.html#VALtimeout"><code class="code"><span class="constructor">Distributed</span>.<span class="constructor">Nonblock_io</span>.timeout</code></a> operation<br>
</div>

<pre><code><span id="TYPElevel"><span class="keyword">type</span> <code class="type"></code>level</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTlevel.Debug"><span class="constructor">Debug</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTlevel.Info"><span class="constructor">Info</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTlevel.Warning"><span class="constructor">Warning</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTlevel.Error"><span class="constructor">Error</span></span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Type to represent levels of a log message.<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>



<pre><span id="VALlib_name"><span class="keyword">val</span> lib_name</span> : <code class="type">string</code></pre><div class="info ">
The name of the implementation, for logging purposes.<br>
</div>

<pre><span id="VALlib_version"><span class="keyword">val</span> lib_version</span> : <code class="type">string</code></pre><div class="info ">
The version implementation, for logging purposes.<br>
</div>

<pre><span id="VALlib_description"><span class="keyword">val</span> lib_description</span> : <code class="type">string</code></pre><div class="info ">
A description of the implementation (e.g., the url of the code repository ), for logging purposes.<br>
</div>

<pre><span id="VALreturn"><span class="keyword">val</span> return</span> : <code class="type">'a -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">return v</code> creates a light weight thread returning <code class="code">v</code>.<br>
</div>

<pre><span id="VAL(>>=)"><span class="keyword">val</span> (&gt;&gt;=)</span> : <code class="type">'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a> -><br>       ('a -> 'b <a href="Distributed.Nonblock_io.html#TYPEt">t</a>) -> 'b <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">bind t f</code> is a thread which first waits for the thread <code class="code">t</code> to terminate and then, if the thread succeeds, 
      behaves as the application of function <code class="code">f</code> to the return value of <code class="code">t</code>. If the thread <code class="code">t</code> fails, <code class="code">bind t f</code> also fails, 
      with the same exception.<br>
</div>

<pre><span id="VALfail"><span class="keyword">val</span> fail</span> : <code class="type">exn -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">fail e</code> is a thread that fails with the exception <code class="code">e</code>.<br>
</div>

<pre><span id="VALcatch"><span class="keyword">val</span> catch</span> : <code class="type">(unit -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a>) -><br>       (exn -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a>) -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">catch t f</code> is a thread that behaves as the thread <code class="code">t ()</code> if this thread succeeds. 
      If the thread <code class="code">t ()</code> fails with some exception, <code class="code">catch t f</code> behaves as the application of <code class="code">f</code> to this exception.<br>
</div>

<pre><span id="VALasync"><span class="keyword">val</span> async</span> : <code class="type">(unit -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a>) -> unit</code></pre><div class="info ">
<code class="code">async f starts</code> a thread without waiting for the result.<br>
</div>

<pre><span id="VALcreate_stream"><span class="keyword">val</span> create_stream</span> : <code class="type">unit -> 'a <a href="Distributed.Nonblock_io.html#TYPEstream">stream</a> * ('a option -> unit)</code></pre><div class="info ">
<code class="code">create ()</code> returns a new stream and a push function.<br>
</div>

<pre><span id="VALget"><span class="keyword">val</span> get</span> : <code class="type">'a <a href="Distributed.Nonblock_io.html#TYPEstream">stream</a> -> 'a option <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">get st</code> removes and returns the first element of the stream, if any. Will block if the stream is empty.<br>
</div>

<pre><span id="VALstream_append"><span class="keyword">val</span> stream_append</span> : <code class="type">'a <a href="Distributed.Nonblock_io.html#TYPEstream">stream</a> -><br>       'a <a href="Distributed.Nonblock_io.html#TYPEstream">stream</a> -> 'a <a href="Distributed.Nonblock_io.html#TYPEstream">stream</a></code></pre><div class="info ">
<code class="code">stream_append s1 s2</code> returns a <code class="code">stream</code> which returns all elements of <code class="code">s1</code>, then all elements of <code class="code">s2</code>.<br>
</div>

<pre><span id="VALclose_input"><span class="keyword">val</span> close_input</span> : <code class="type"><a href="Distributed.Nonblock_io.html#TYPEinput_channel">input_channel</a> -> unit <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">close ch</code> closes the given channel immediately.<br>
</div>

<pre><span id="VALclose_output"><span class="keyword">val</span> close_output</span> : <code class="type"><a href="Distributed.Nonblock_io.html#TYPEoutput_channel">output_channel</a> -> unit <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">close ch</code> closes the given channel. It performs all pending actions, flushes it and closes it.<br>
</div>

<pre><span id="VALread_value"><span class="keyword">val</span> read_value</span> : <code class="type"><a href="Distributed.Nonblock_io.html#TYPEinput_channel">input_channel</a> -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">read_value ic</code> reads a marshalled value from <code class="code">ic</code>.<br>
</div>

<pre><span id="VALwrite_value"><span class="keyword">val</span> write_value</span> : <code class="type"><a href="Distributed.Nonblock_io.html#TYPEoutput_channel">output_channel</a> -><br>       ?flags:Marshal.extern_flags list -> 'a -> unit <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">write_value oc ?flags x</code> marshals the value <code class="code">x</code> to <code class="code">oc</code>.<br>
</div>

<pre><span id="VALopen_connection"><span class="keyword">val</span> open_connection</span> : <code class="type">Unix.sockaddr -><br>       (<a href="Distributed.Nonblock_io.html#TYPEinput_channel">input_channel</a> *<br>        <a href="Distributed.Nonblock_io.html#TYPEoutput_channel">output_channel</a>)<br>       <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">open_connection addr</code> opens a connection to the given address and returns two channels for using it.<br>
</div>

<pre><span id="VALestablish_server"><span class="keyword">val</span> establish_server</span> : <code class="type">?backlog:int -><br>       Unix.sockaddr -><br>       (Unix.sockaddr -><br>        <a href="Distributed.Nonblock_io.html#TYPEinput_channel">input_channel</a> *<br>        <a href="Distributed.Nonblock_io.html#TYPEoutput_channel">output_channel</a> -> unit <a href="Distributed.Nonblock_io.html#TYPEt">t</a>) -><br>       <a href="Distributed.Nonblock_io.html#TYPEserver">server</a> <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">establish_server ?backlog sockaddr f</code> creates a server which will listen for incoming connections. 
      New connections are passed to <code class="code">f</code>. Note that <code class="code">f</code> must not raise any exception. Backlog is the argument passed to Lwt_unix.listen.<br>
</div>

<pre><span id="VALshutdown_server"><span class="keyword">val</span> shutdown_server</span> : <code class="type"><a href="Distributed.Nonblock_io.html#TYPEserver">server</a> -> unit <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">shutdown_server server</code> will shutdown <code class="code">server</code>.<br>
</div>

<pre><span id="VALlog"><span class="keyword">val</span> log</span> : <code class="type"><a href="Distributed.Nonblock_io.html#TYPElevel">level</a> -><br>       (unit -> string) -> unit <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">log level message_formatter</code> logs a message at the specified level using the formatter provided.<br>
</div>

<pre><span id="VALsleep"><span class="keyword">val</span> sleep</span> : <code class="type">float -> unit <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">sleep d</code> is a thread that remains suspended for <code class="code">d</code> seconds and then terminates.<br>
</div>

<pre><span id="VALtimeout"><span class="keyword">val</span> timeout</span> : <code class="type">float -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">timeout d</code> is a thread that remains suspended for <code class="code">d</code> seconds and then fails with ​.<br>
</div>

<pre><span id="VALpick"><span class="keyword">val</span> pick</span> : <code class="type">'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a> list -> 'a <a href="Distributed.Nonblock_io.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">pick l</code> is the same as <code class="code">​choose</code>, except that it cancels all sleeping threads when one terminates.<br>
</div>

<pre><span id="VALat_exit"><span class="keyword">val</span> at_exit</span> : <code class="type">(unit -> unit <a href="Distributed.Nonblock_io.html#TYPEt">t</a>) -> unit</code></pre><div class="info ">
<code class="code">at_exit fn</code> will call fn on program exit.<br>
</div>
</body></html>